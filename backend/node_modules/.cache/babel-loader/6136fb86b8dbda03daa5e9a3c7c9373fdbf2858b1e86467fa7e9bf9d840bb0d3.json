{"ast":null,"code":"// src/models/MateriasModel.js\n\n// === ORDEN DE NUTRIENTES (tu orden exacto) ===\nexport const DETAIL_KEYS = [\"MS\", \"EM\", \"NDT\", \"PB\", \"Ca\", \"P\", \"Mg\", \"Na\", \"K\", \"S\", \"Cu\", \"Co\", \"Fe\", \"Mn\", \"Se\", \"Zn\", \"I\", \"FDN\", \"EE\", \"CNF\"];\nexport const pickDetalleKeys = d => {\n  if (!d) return null;\n  const out = {};\n  DETAIL_KEYS.forEach(k => {\n    var _d$k;\n    out[k] = (_d$k = d[k]) !== null && _d$k !== void 0 ? _d$k : null;\n  });\n  return out;\n};\n\n/**\r\n * (Opcional) Si prefieres iterar en la vista sin depender del orden\r\n * de propiedades, usa este helper para obtener un array ya ordenado.\r\n */\nexport const toDetalleArray = d => {\n  if (!d) return [];\n  return DETAIL_KEYS.map(key => {\n    var _d$key;\n    return {\n      key,\n      value: (_d$key = d[key]) !== null && _d$key !== void 0 ? _d$key : null\n    };\n  });\n};\nexport const ORDER = {\n  clasificacion: [\"Forraje\", \"Concentrado\", \"Mineral\", \"Suplemento\", \"Subproducto\", \"Aditivo\", \"Temporal\"],\n  nombre: []\n};\nfunction getPriority(value, list) {\n  const idx = list.findIndex(x => String(x).toLowerCase() === String(value !== null && value !== void 0 ? value : \"\").toLowerCase());\n  return idx === -1 ? Number.MAX_SAFE_INTEGER : idx;\n}\nexport function makeMateriaComparator(order = ORDER) {\n  var _order$clasificacion, _order$nombre;\n  const cList = (_order$clasificacion = order === null || order === void 0 ? void 0 : order.clasificacion) !== null && _order$clasificacion !== void 0 ? _order$clasificacion : [];\n  const nList = (_order$nombre = order === null || order === void 0 ? void 0 : order.nombre) !== null && _order$nombre !== void 0 ? _order$nombre : [];\n  return (a, b) => {\n    var _a$clasificacion, _b$clasificacion, _a$nombre, _b$nombre;\n    const ca = ((_a$clasificacion = a.clasificacion) !== null && _a$clasificacion !== void 0 ? _a$clasificacion : \"\").trim();\n    const cb = ((_b$clasificacion = b.clasificacion) !== null && _b$clasificacion !== void 0 ? _b$clasificacion : \"\").trim();\n    const pcA = getPriority(ca, cList);\n    const pcB = getPriority(cb, cList);\n    if (pcA !== pcB) return pcA - pcB;\n    const byClas = ca.localeCompare(cb, undefined, {\n      sensitivity: \"base\"\n    });\n    if (byClas !== 0) return byClas;\n    const na = ((_a$nombre = a.nombre) !== null && _a$nombre !== void 0 ? _a$nombre : \"\").trim();\n    const nb = ((_b$nombre = b.nombre) !== null && _b$nombre !== void 0 ? _b$nombre : \"\").trim();\n    const pnA = getPriority(na, nList);\n    const pnB = getPriority(nb, nList);\n    if (pnA !== pnB) return pnA - pnB;\n    return na.localeCompare(nb, undefined, {\n      sensitivity: \"base\"\n    });\n  };\n}","map":{"version":3,"names":["DETAIL_KEYS","pickDetalleKeys","d","out","forEach","k","_d$k","toDetalleArray","map","key","_d$key","value","ORDER","clasificacion","nombre","getPriority","list","idx","findIndex","x","String","toLowerCase","Number","MAX_SAFE_INTEGER","makeMateriaComparator","order","_order$clasificacion","_order$nombre","cList","nList","a","b","_a$clasificacion","_b$clasificacion","_a$nombre","_b$nombre","ca","trim","cb","pcA","pcB","byClas","localeCompare","undefined","sensitivity","na","nb","pnA","pnB"],"sources":["C:/Users/maico/OneDrive/Documentos/a/backend/src/models/MateriasModel.js"],"sourcesContent":["// src/models/MateriasModel.js\r\n\r\n// === ORDEN DE NUTRIENTES (tu orden exacto) ===\r\nexport const DETAIL_KEYS = [\r\n    \"MS\",\r\n    \"EM\",\r\n    \"NDT\",\r\n    \"PB\",\r\n    \"Ca\",\r\n    \"P\",\r\n    \"Mg\",\r\n    \"Na\",\r\n    \"K\",\r\n    \"S\",\r\n    \"Cu\",\r\n    \"Co\",\r\n    \"Fe\",\r\n    \"Mn\",\r\n    \"Se\",\r\n    \"Zn\",\r\n    \"I\",\r\n    \"FDN\",\r\n    \"EE\",\r\n    \"CNF\",\r\n];\r\n\r\nexport const pickDetalleKeys = (d) => {\r\n    if (!d) return null;\r\n    const out = {};\r\n    DETAIL_KEYS.forEach((k) => {\r\n        out[k] = d[k] ?? null;\r\n    });\r\n    return out;\r\n};\r\n\r\n/**\r\n * (Opcional) Si prefieres iterar en la vista sin depender del orden\r\n * de propiedades, usa este helper para obtener un array ya ordenado.\r\n */\r\nexport const toDetalleArray = (d) => {\r\n    if (!d) return [];\r\n    return DETAIL_KEYS.map((key) => ({ key, value: d[key] ?? null }));\r\n};\r\n\r\nexport const ORDER = {\r\n    clasificacion: [\"Forraje\", \"Concentrado\", \"Mineral\", \"Suplemento\", \"Subproducto\", \"Aditivo\", \"Temporal\"],\r\n    nombre: [],\r\n};\r\n\r\nfunction getPriority(value, list) {\r\n    const idx = list.findIndex((x) => String(x).toLowerCase() === String(value ?? \"\").toLowerCase());\r\n    return idx === -1 ? Number.MAX_SAFE_INTEGER : idx;\r\n}\r\n\r\nexport function makeMateriaComparator(order = ORDER) {\r\n    const cList = order?.clasificacion ?? [];\r\n    const nList = order?.nombre ?? [];\r\n    return (a, b) => {\r\n        const ca = (a.clasificacion ?? \"\").trim();\r\n        const cb = (b.clasificacion ?? \"\").trim();\r\n        const pcA = getPriority(ca, cList);\r\n        const pcB = getPriority(cb, cList);\r\n        if (pcA !== pcB) return pcA - pcB;\r\n        const byClas = ca.localeCompare(cb, undefined, { sensitivity: \"base\" });\r\n        if (byClas !== 0) return byClas;\r\n        const na = (a.nombre ?? \"\").trim();\r\n        const nb = (b.nombre ?? \"\").trim();\r\n        const pnA = getPriority(na, nList);\r\n        const pnB = getPriority(nb, nList);\r\n        if (pnA !== pnB) return pnA - pnB;\r\n        return na.localeCompare(nb, undefined, { sensitivity: \"base\" });\r\n    };\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}