{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useMemo, useState } from \"react\";\nimport { initialDatosAnimal, computePesoMedio } from \"../models/datosAnimal.model\";\nimport { computeFormulasBySelection } from \"../models/formulas\";\nexport function useDatosAnimalController(onSiguiente) {\n  _s();\n  const [form, setForm] = useState(initialDatosAnimal);\n  const pesoMedio = useMemo(() => computePesoMedio(form.pesoInicial, form.pesoFinal), [form.pesoInicial, form.pesoFinal]);\n  const updateField = (field, value) => setForm(prev => ({\n    ...prev,\n    [field]: value\n  }));\n  const handleNext = async () => {\n    const required = [\"raza\", \"sistema\", \"sexo\", \"pesoInicial\", \"pesoFinal\", \"pesoDiario\", \"tempMax\", \"humedad\"];\n    const missing = required.filter(k => !form[k] && form[k] !== 0);\n    if (missing.length) {\n      alert(\"Por favor completa todos los campos requeridos en Paso 1.\");\n      return;\n    }\n    const ctx = {\n      P3: parseFloat(form.pesoInicial),\n      Q3: parseFloat(form.pesoFinal),\n      T3: parseFloat(form.pesoDiario),\n      V3: parseFloat(form.tempMax),\n      W3: parseFloat(form.humedad)\n    };\n    const selection = {\n      raza: form.raza,\n      sistema: form.sistema,\n      sexo: form.sexo\n    };\n    try {\n      const {\n        resultados,\n        controlKey,\n        controlValue,\n        order,\n        variant\n      } = await computeFormulasBySelection(selection, ctx);\n      if (onSiguiente) onSiguiente({\n        ...form,\n        pesoMedio,\n        resultados,\n        controlKey,\n        controlValue,\n        order,\n        variant\n      });\n    } catch (error) {\n      console.error(error);\n      alert(error.message || \"Error en el c치lculo de las f칩rmulas\");\n    }\n  };\n  return {\n    form,\n    updateField,\n    pesoMedio,\n    handleNext\n  };\n}\n_s(useDatosAnimalController, \"Xcg01kpLL1+rVa0SG1AETHH5HV8=\");","map":{"version":3,"names":["useMemo","useState","initialDatosAnimal","computePesoMedio","computeFormulasBySelection","useDatosAnimalController","onSiguiente","_s","form","setForm","pesoMedio","pesoInicial","pesoFinal","updateField","field","value","prev","handleNext","required","missing","filter","k","length","alert","ctx","P3","parseFloat","Q3","T3","pesoDiario","V3","tempMax","W3","humedad","selection","raza","sistema","sexo","resultados","controlKey","controlValue","order","variant","error","console","message"],"sources":["C:/Users/maico/OneDrive/Documentos/a/backend/src/controllers/DatosAnimalController.js"],"sourcesContent":["import { useMemo, useState } from \"react\";\r\nimport { initialDatosAnimal, computePesoMedio } from \"../models/datosAnimal.model\";\r\nimport { computeFormulasBySelection } from \"../models/formulas\";\r\n\r\nexport function useDatosAnimalController(onSiguiente) {\r\n    const [form, setForm] = useState(initialDatosAnimal);\r\n\r\n    const pesoMedio = useMemo(\r\n        () => computePesoMedio(form.pesoInicial, form.pesoFinal),\r\n        [form.pesoInicial, form.pesoFinal]\r\n    );\r\n\r\n    const updateField = (field, value) => setForm(prev => ({ ...prev, [field]: value }));\r\n\r\n    const handleNext = async () => {\r\n        const required = [\"raza\", \"sistema\", \"sexo\", \"pesoInicial\", \"pesoFinal\", \"pesoDiario\", \"tempMax\", \"humedad\"];\r\n        const missing = required.filter(k => !form[k] && form[k] !== 0);\r\n        if (missing.length) {\r\n            alert(\"Por favor completa todos los campos requeridos en Paso 1.\");\r\n            return;\r\n        }\r\n\r\n        const ctx = {\r\n            P3: parseFloat(form.pesoInicial),\r\n            Q3: parseFloat(form.pesoFinal),\r\n            T3: parseFloat(form.pesoDiario),\r\n            V3: parseFloat(form.tempMax),\r\n            W3: parseFloat(form.humedad),\r\n        };\r\n\r\n        const selection = { raza: form.raza, sistema: form.sistema, sexo: form.sexo };\r\n\r\n        try {\r\n            const { resultados, controlKey, controlValue, order, variant } =\r\n                await computeFormulasBySelection(selection, ctx);\r\n\r\n            if (onSiguiente) onSiguiente({ ...form, pesoMedio, resultados, controlKey, controlValue, order, variant });\r\n        } catch (error) {\r\n            console.error(error);\r\n            alert(error.message || \"Error en el c치lculo de las f칩rmulas\");\r\n        }\r\n    };\r\n\r\n    return { form, updateField, pesoMedio, handleNext };\r\n}"],"mappings":";AAAA,SAASA,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AACzC,SAASC,kBAAkB,EAAEC,gBAAgB,QAAQ,6BAA6B;AAClF,SAASC,0BAA0B,QAAQ,oBAAoB;AAE/D,OAAO,SAASC,wBAAwBA,CAACC,WAAW,EAAE;EAAAC,EAAA;EAClD,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGR,QAAQ,CAACC,kBAAkB,CAAC;EAEpD,MAAMQ,SAAS,GAAGV,OAAO,CACrB,MAAMG,gBAAgB,CAACK,IAAI,CAACG,WAAW,EAAEH,IAAI,CAACI,SAAS,CAAC,EACxD,CAACJ,IAAI,CAACG,WAAW,EAAEH,IAAI,CAACI,SAAS,CACrC,CAAC;EAED,MAAMC,WAAW,GAAGA,CAACC,KAAK,EAAEC,KAAK,KAAKN,OAAO,CAACO,IAAI,KAAK;IAAE,GAAGA,IAAI;IAAE,CAACF,KAAK,GAAGC;EAAM,CAAC,CAAC,CAAC;EAEpF,MAAME,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC3B,MAAMC,QAAQ,GAAG,CAAC,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,aAAa,EAAE,WAAW,EAAE,YAAY,EAAE,SAAS,EAAE,SAAS,CAAC;IAC5G,MAAMC,OAAO,GAAGD,QAAQ,CAACE,MAAM,CAACC,CAAC,IAAI,CAACb,IAAI,CAACa,CAAC,CAAC,IAAIb,IAAI,CAACa,CAAC,CAAC,KAAK,CAAC,CAAC;IAC/D,IAAIF,OAAO,CAACG,MAAM,EAAE;MAChBC,KAAK,CAAC,2DAA2D,CAAC;MAClE;IACJ;IAEA,MAAMC,GAAG,GAAG;MACRC,EAAE,EAAEC,UAAU,CAAClB,IAAI,CAACG,WAAW,CAAC;MAChCgB,EAAE,EAAED,UAAU,CAAClB,IAAI,CAACI,SAAS,CAAC;MAC9BgB,EAAE,EAAEF,UAAU,CAAClB,IAAI,CAACqB,UAAU,CAAC;MAC/BC,EAAE,EAAEJ,UAAU,CAAClB,IAAI,CAACuB,OAAO,CAAC;MAC5BC,EAAE,EAAEN,UAAU,CAAClB,IAAI,CAACyB,OAAO;IAC/B,CAAC;IAED,MAAMC,SAAS,GAAG;MAAEC,IAAI,EAAE3B,IAAI,CAAC2B,IAAI;MAAEC,OAAO,EAAE5B,IAAI,CAAC4B,OAAO;MAAEC,IAAI,EAAE7B,IAAI,CAAC6B;IAAK,CAAC;IAE7E,IAAI;MACA,MAAM;QAAEC,UAAU;QAAEC,UAAU;QAAEC,YAAY;QAAEC,KAAK;QAAEC;MAAQ,CAAC,GAC1D,MAAMtC,0BAA0B,CAAC8B,SAAS,EAAEV,GAAG,CAAC;MAEpD,IAAIlB,WAAW,EAAEA,WAAW,CAAC;QAAE,GAAGE,IAAI;QAAEE,SAAS;QAAE4B,UAAU;QAAEC,UAAU;QAAEC,YAAY;QAAEC,KAAK;QAAEC;MAAQ,CAAC,CAAC;IAC9G,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACpBpB,KAAK,CAACoB,KAAK,CAACE,OAAO,IAAI,qCAAqC,CAAC;IACjE;EACJ,CAAC;EAED,OAAO;IAAErC,IAAI;IAAEK,WAAW;IAAEH,SAAS;IAAEO;EAAW,CAAC;AACvD;AAACV,EAAA,CAxCeF,wBAAwB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}